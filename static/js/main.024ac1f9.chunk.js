(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{32:function(e,t,a){},35:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(23),i=a.n(c),s=(a(32),a(5)),o=a(6),l=a(7),u=a(8),d=a(13),j=a(4),m=a(3),h=a(2),b=a.n(h),p=a(24),f=a(19),v="user",O=function(e){return localStorage.setItem(v,JSON.stringify(e))},x=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},g=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(v));null===t&&(t={}),x(t)(e)}))},N=function(e){return new Promise((function(t){O(Object(f.a)(Object(f.a)({},{name:"",email:"",image:"",description:""}),e)),x("OK")(t)}))},k=function(e){return new Promise((function(t){O(Object(f.a)({},e)),x("OK")(t)}))},S=a(0),w=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(S.jsx)("div",{children:Object(S.jsx)("p",{children:"Carregando..."})})}}]),a}(n.Component),y=w,C=(a(35),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target.value;e.setState({userName:a})},e.userSet=function(){var t=e.state.userName;e.setState({loadingScreen:!0},Object(m.a)(b.a.mark((function a(){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N({name:t});case 2:e.setState({loadingScreen:!1,logged:!0});case 3:case"end":return a.stop()}}),a)}))))},e.state={userName:"",loadingScreen:!1},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.userName,a=e.loadingScreen,n=e.logged;return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"div-image",children:a?Object(S.jsx)(y,{}):""}),Object(S.jsxs)("div",{className:"login-div","data-testid":"page-login",children:[n?Object(S.jsx)(p.Redirect,{to:"/search"}):"",Object(S.jsxs)("form",{className:"login-form",action:"",children:[Object(S.jsx)("label",{htmlFor:"userName",children:Object(S.jsx)("input",{className:"login-input",name:"userName",type:"text",placeholder:"Nome",onChange:this.handleChange,value:t,"data-testid":"login-name-input"})}),Object(S.jsx)("button",{className:"login-button",type:"button","data-testid":"login-submit-button",disabled:t.length<3,onClick:this.userSet,children:"Entrar"})]})]})]})}}]),a}(n.Component)),I=(a(41),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={loading:!0,getName:""},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:t=e.sent,this.setState({getName:t.name,loading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.getName,a=e.loading;return Object(S.jsxs)("header",{"data-testid":"header-component",children:[Object(S.jsxs)("div",{className:"div-name",children:[Object(S.jsx)("div",{className:"img-logo",children:Object(S.jsx)("hr",{})}),a?Object(S.jsx)(y,{}):"",Object(S.jsx)("p",{"data-testid":"header-user-name",className:"p-div",children:t})]}),Object(S.jsxs)("nav",{className:"nav-header",children:[Object(S.jsx)(d.b,{"data-testid":"link-to-search",exact:!0,to:"/search",className:"search-nav",children:"Search"}),Object(S.jsx)(d.b,{"data-testid":"link-to-favorites",exact:!0,to:"/favorites",className:"favorites-nav",children:"Favorites"}),Object(S.jsx)(d.b,{"data-testid":"link-to-profile",exact:!0,to:"/profile",className:"profile-nav",children:"Profile"})]})]})}}]),a}(n.Component)),F=I,D=function(){var e=Object(m.a)(b.a.mark((function e(t){var a,n,r,c,i,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=encodeURI(t).replaceAll("%20","+"),n="https://itunes.apple.com/search?entity=album&term=".concat(a,"&attribute=allArtistTerm"),e.next=4,fetch(n);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,i=c.results,s=i.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=D,U=(a(42),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target.value;e.setState({artistName:a})},e.setAlbum=function(){e.setState({loading:!0},Object(m.a)(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.artistName,t.next=3,R(a);case 3:n=t.sent,e.setState({search:a,artistName:"",loading:!1,albuns:n});case 5:case"end":return t.stop()}}),t)}))))},e.state={artistName:"",loading:!1},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.artistName,a=e.loading,n=e.search,r=e.albuns;return Object(S.jsxs)("div",{"data-testid":"page-search",children:[Object(S.jsx)(F,{}),Object(S.jsx)("form",{className:"form-search",action:"",children:a?Object(S.jsx)(y,{}):Object(S.jsxs)("div",{className:"div-form",children:[Object(S.jsx)("input",{type:"text",placeholder:"Digite o nome do artista","data-testid":"search-artist-input",className:"input-search",onChange:this.handleChange,value:t}),Object(S.jsx)("button",{type:"button","data-testid":"search-artist-button",className:"button-search",disabled:t.length<2,onClick:this.setAlbum,children:"Procurar"})]})}),Object(S.jsxs)("div",{children:[r?Object(S.jsxs)("div",{className:"album-search",children:[Object(S.jsx)("div",{className:"name",children:Object(S.jsx)("h2",{children:"Resultado de \xe1lbuns de: ".concat(n)})}),r.map((function(e){return Object(S.jsxs)("div",{className:"album",children:[Object(S.jsx)("h3",{children:e.collectionName}),Object(S.jsx)(d.b,{to:"/album/".concat(e.collectionId),"data-testid":"link-to-album-".concat(e.collectionId),children:"Album"}),Object(S.jsx)("p",{children:e.artistName}),Object(S.jsx)("img",{src:e.artworkUrl100,alt:e.collectionName})]},e.collectionId)}))]}):"",void 0===r||r.length?"":Object(S.jsx)("p",{children:"Nenhum \xe1lbum foi encontrado"})]})]})}}]),a}(n.Component)),P=a(27),E="favorite_songs";JSON.parse(localStorage.getItem(E))||localStorage.setItem(E,JSON.stringify([]));var J=function(){return JSON.parse(localStorage.getItem(E))},M=function(e){return localStorage.setItem(E,JSON.stringify(e))},q=function(e){return function(t){setTimeout((function(){t(e)}),500)}},A=function(){return new Promise((function(e){var t=J();q(t)(e)}))},T=function(e){return new Promise((function(t){if(e){var a=J();M([].concat(Object(P.a)(a),[e]))}q("OK")(t)}))},K=function(e){return new Promise((function(t){var a=J();M(a.filter((function(t){return t.trackId!==e.trackId}))),q("OK")(t)}))},B=function(){var e=Object(m.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=B,_=(a(43),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).addSongFav=function(){n.setState({loading:!0},Object(m.a)(b.a.mark((function e(){var t,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.music,r=t.getFavs,e.next=3,T(a);case 3:return e.next=5,r();case 5:n.setState({loading:!1});case 6:case"end":return e.stop()}}),e)}))))},n.removeSongFav=function(){n.setState({loading:!0},Object(m.a)(b.a.mark((function e(){var t,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.music,r=t.getFavs,e.next=3,K(a);case 3:return e.next=5,r();case 5:n.setState({loading:!1});case 6:case"end":return e.stop()}}),e)}))))},n.handleChange=function(e){var t=e.target.checked;n.setState({favorite:t},Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?n.addSongFav():n.removeSongFav();case 1:case"end":return e.stop()}}),e)}))))};var r=n.props.isFavorite;return n.state={loading:!1,favorite:r},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.trackName,a=e.previewUrl,n=e.trackId,r=e.artistName,c=e.collectionName,i=e.artworkUrl100,s=this.state,o=s.loading,l=s.favorite;return Object(S.jsxs)("div",{children:[o?Object(S.jsx)(y,{}):"",Object(S.jsxs)("div",{className:"card-content",children:[Object(S.jsx)("img",{src:i,alt:r}),Object(S.jsx)("hr",{}),Object(S.jsx)("h2",{children:r}),Object(S.jsx)("span",{children:c}),Object(S.jsx)("p",{children:t}),Object(S.jsxs)("audio",{"data-testid":"audio-component",src:a,controls:!0,children:[Object(S.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento"," ",Object(S.jsx)("code",{children:"audio"}),"."]})]}),Object(S.jsx)("div",{className:"input-container",children:Object(S.jsxs)("label",{htmlFor:t,children:["Favorita",Object(S.jsx)("input",{id:t,type:"checkbox",onChange:this.handleChange,checked:l,"data-testid":"checkbox-music-".concat(n)})]})})]})}}]),a}(n.Component)),z=(a(44),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getFavs=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:t=e.sent,n.setState({favoriteSong:t});case 4:case"end":return e.stop()}}),e)}))),n.isFavorite=function(e){return!!n.state.favoriteSong.some((function(t){return t.trackId===e}))},n.state={loading:!0},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t,a,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match,e.next=3,L(t.params.id);case 3:return a=e.sent,n=a.filter((function(e){return"song"===e.kind})),e.next=7,A();case 7:r=e.sent,this.setState({musics:n,album:a[0],loading:!1,favoriteSong:r});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.album,n=t.loading,r=t.musics;return Object(S.jsxs)("div",{"data-testid":"page-album",children:[Object(S.jsx)(F,{}),n?Object(S.jsx)(y,{}):Object(S.jsxs)("div",{className:"container",children:[Object(S.jsxs)("div",{className:"pricipal-div",children:[Object(S.jsx)("h2",{"data-testid":"artist-name",children:a.artistName}),Object(S.jsx)("img",{className:"img-album",src:a.artworkUrl100,alt:a.trackName}),Object(S.jsx)("p",{"data-testid":"album-name",children:a.collectionName})]}),Object(S.jsx)("div",{className:"album-div",children:r.map((function(t){return Object(S.jsx)("div",{className:"map-card",children:Object(S.jsx)(_,{trackName:t.trackName,previewUrl:t.previewUrl,trackId:t.trackId,music:t,getFavs:e.getFavs,isFavorite:e.isFavorite(t.trackId)},t.trackId)},t.trackId)}))})]})]})}}]),a}(n.Component)),G=z,H=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).getFavorites=Object(m.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({loading:!0},Object(m.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A();case 2:a=t.sent,e.setState({favs:a,loading:!1});case 4:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)}))),e.state={loading:!0,favs:[]},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getFavorites();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.favs,n=t.loading;return Object(S.jsxs)("div",{"data-testid":"page-favorites",children:[Object(S.jsx)(F,{}),n?Object(S.jsx)(y,{}):Object(S.jsx)("div",{className:"album-div",children:a.map((function(t){return Object(S.jsx)("div",{className:"map-card",children:Object(S.jsx)(_,{artworkUrl100:t.artworkUrl100,artistName:t.artistName,collectionName:t.collectionName,trackName:t.trackName,previewUrl:t.previewUrl,trackId:t.trackId,music:t,getFavs:e.getFavorites,isFavorite:!0},t.trackId)},t.trackName)}))})]})}}]),a}(n.Component),Q=H,V=(a(45),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={loading:!0,userName:"",userEmail:"",userImage:"",userDescription:""},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:t=e.sent,this.setState({loading:!1,userName:t.name,userEmail:t.email,userImage:t.image,userDescription:t.description}),console.log(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.userName,n=e.userEmail,r=e.userImage,c=e.userDescription;return Object(S.jsxs)("div",{"data-testid":"page-profile",children:[Object(S.jsx)(F,{}),t?Object(S.jsx)(y,{}):Object(S.jsxs)("div",{className:"div-profile",children:[Object(S.jsx)("img",{className:"img-perfil","data-testid":"profile-image",src:r,alt:a}),Object(S.jsx)("p",{className:"profile-p",children:"Nome:"}),Object(S.jsx)("strong",{children:a}),Object(S.jsx)("p",{className:"profile-p",children:"Email:"}),Object(S.jsx)("strong",{children:n}),Object(S.jsx)("p",{className:"profile-p",children:"Descri\xe7\xe3o:"}),Object(S.jsx)("strong",{children:c}),Object(S.jsx)("button",{className:"editar-perfil",children:Object(S.jsx)(d.b,{className:"link",exact:!0,to:"/profile/edit",children:"Editar perfil"})})]})]})}}]),a}(n.Component)),W=V,X=a(18),Y=(a(46),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).validation=function(){var t=e.state,a=t.name,n=t.email,r=t.image,c=t.description;if(a&&/\S+@\S+\.\S+/.test(n)&&c&&r)return e.setState({disabled:!1})},e.handleClick=Object(m.a)(b.a.mark((function t(){var a,n,r,c,i,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),a=e.state,n=a.name,r=a.email,c=a.description,i=a.image,s={name:n,email:r,description:c,image:i},t.next=5,k(s);case 5:e.setState({loading:!1,redirect:!0});case 6:case"end":return t.stop()}}),t)}))),e.handleChange=function(t){var a=t.target,n=a.value,r=a.name;e.setState(Object(X.a)({},r,n)),e.validation()},e.state={loading:!0,redirect:!1,disabled:!0,name:"",email:"",image:"",description:""},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t,a,n,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:t=e.sent,a=t.name,n=t.email,r=t.description,c=t.image,this.setState({loading:!1,name:a,email:n,description:r,image:c}),this.validation();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.disabled,a=e.loading,n=e.redirect,r=e.name,c=e.email,i=e.image,s=e.description;return Object(S.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(S.jsx)(F,{}),n?Object(S.jsx)(j.Redirect,{to:"/profile"}):"",a?Object(S.jsx)(y,{}):Object(S.jsxs)("form",{className:"div-edit",children:[Object(S.jsx)("img",{src:i,className:"img-perfil",alt:r}),Object(S.jsx)("input",{value:i,onChange:this.handleChange,name:"image",type:"text",className:"img-input",placeholder:"Coloque a URL da foto aqui","data-testid":"edit-input-image"}),Object(S.jsx)("label",{htmlFor:"name",children:"Nome"}),Object(S.jsx)("input",{onChange:this.handleChange,value:r,name:"name",className:"name-input",type:"text",placeholder:"Digite seu nome aqui","data-testid":"edit-input-name"}),Object(S.jsx)("label",{htmlFor:"email",children:"Email"}),Object(S.jsx)("input",{onChange:this.handleChange,value:c,name:"email",className:"email-input",type:"text",placeholder:"Digite seu email aqui","data-testid":"edit-input-email"}),Object(S.jsx)("label",{htmlFor:"description",children:"Descri\xe7\xe3o:"}),Object(S.jsx)("textarea",{onChange:this.handleChange,value:s,name:"description",placeholder:"Sobre mim",className:"description-input","data-testid":"edit-input-description"}),Object(S.jsx)("button",{type:"button","data-testid":"edit-button-save",className:"button-save",disabled:t,onClick:this.handleClick,children:"Salvar perfil"})]})]})}}]),a}(n.Component)),Z=Y,$=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(S.jsxs)("div",{"data-testid":"page-not-found",children:[Object(S.jsx)("strong",{children:"ERROR 404"}),Object(S.jsx)("h1",{children:"Desculpe n\xe3o h\xe1 nada por aqui"})]})}}]),a}(n.Component),ee=$,te=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(S.jsx)(d.a,{basename:"/TrybeTunes",children:Object(S.jsxs)(j.Switch,{children:[Object(S.jsx)(j.Route,{exact:!0,path:"/",component:C}),Object(S.jsx)(j.Route,{exact:!0,path:"/search",component:U}),Object(S.jsx)(j.Route,{path:"/album/:id",component:G}),Object(S.jsx)(j.Route,{exact:!0,path:"/favorites",component:Q}),Object(S.jsx)(j.Route,{exact:!0,path:"/profile",component:W}),Object(S.jsx)(j.Route,{exact:!0,path:"/profile/edit",component:Z}),Object(S.jsx)(j.Route,{path:"*",component:ee})]})})}}]),a}(r.a.Component),ae=te;i.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(ae,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.024ac1f9.chunk.js.map